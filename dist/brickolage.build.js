/*! For license information please see brickolage.build.js.LICENSE.txt */
var Brickolage;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};(()=>{e.d(t,{default:()=>u});const n={container:".brickolage--container",item:".brickolage--item",separatorClassName:"brickolage--separator",separatorTagName:"li",originalOrder:!1};const r={height:null,sortedOrder:[],heights:[],columnsNum:null,separators:[],__changed:{}};function o(e,t){if(!e)return e;let n=e;switch(typeof e){case"string":n=(t||document).querySelectorAll(e);break;case"object":e.nodeType&&(n=[e])}return n}function s(e){const t=function(e){let t={...n};return e&&"object"==typeof e&&(t={...t,...e}),t}(e),s=function({container:e,item:t,separatorClassName:n}){const s=[],i=[...o(e)];return i.length&&i.map(((e,i)=>{const a=[...o(t,e)].filter((e=>!(e.classList&&e.classList.contains(n))));a.length&&(s[i]={container:e,items:a,...r})})),s}(t);return s.length&&s.map((e=>e.container.classList.add("brickolage--initialized"))),[t,s]}function i({columnsNum:e,items:t},n){const r=Array.from({length:e},(()=>[])),o=Array.from({length:e},(()=>0));let s=0;return t.filter((e=>!!e)).map(((t,i)=>{const a=function(e){return Math.ceil(parseFloat(e))}(window.getComputedStyle(t).getPropertyValue("height")||1);if(n)r[s].push(i),o[s]+=a,s<e-1?s+=1:s=0;else{const e=Math.min(...o),t=o.indexOf(e);r[t].push(i),o[t]+=a}})),[o,r]}function a(e){e.separators.map((e=>e.remove()))}function c(e,t,n){!function({container:e,items:t}){e.style.height=null,t.map((e=>e.style.order=null))}(e),a(e),n[t]={...e,...r}}function l(e,t,n){!function(e){const{container:t,items:n,columnsNum:r}=e,o=Math.round((t.clientWidth||1)/(n[0].offsetWidth||1));e.columnsNum=o,e.__changed={...e.__changed,columnsNum:o!==r}}(e),e.columnsNum<2?e.__changed.columnsNum&&e.sortedOrder.length&&c(e,t,n.instances):(function(e,t){const n=[...e.sortedOrder];[e.heights,e.sortedOrder]=i(e,!!t.originalOrder),e.__changed={...e.__changed,sortedOrder:JSON.stringify(n)!==JSON.stringify(e.sortedOrder)}}(e,n.options),function(e){e.height=Math.max(...e.heights)}(e),function({container:e,height:t}){e.style.height=`${t}px`}(e),e.__changed.sortedOrder&&(function({sortedOrder:e,items:t}){e.map(((e,n)=>e.map((e=>t[e].style.order=n+1))))}(e),e.__changed.columnsNum&&function(e,t){const{container:n,items:r,separators:o,columnsNum:s}=e;a(e);const i=t.separatorTagName||r[0].tagName.toLowerCase();for(let r=0;r<s-1;r++){const o=document.createElement(i);o.className=t.separatorClassName,o.style.order=r+1,n.appendChild(o),e.separators[r]=o}}(e,n.options)))}class u{constructor(e){return["reLayout","reFresh","destroy"].map((e=>this[e]=this[e].bind(this))),[this.options,this.instances]=s(e),this.reLayout(),window.addEventListener("resize",this.reLayout),this}reLayout(e){const{options:t,instances:n}=this;n.length&&n.map(((t,n)=>{l(t,n,this),"function"==typeof e&&e(t,n)}))}reFresh(e,t){[this.options,this.instances]=s(t),"function"==typeof e&&e()}destroy(e){const{instances:t,reLayout:n}=this;t.length&&(window.removeEventListener("resize",n),t.map(((n,r)=>{n.container.classList.remove("brickolage--initialized"),c(n,r,t),delete t[r],"function"==typeof e&&e(n,r)})))}}})(),Brickolage=t.default})();